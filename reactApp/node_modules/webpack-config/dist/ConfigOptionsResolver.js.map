{"version":3,"sources":["../src/ConfigOptionsResolver.js"],"names":["STRING_RESOLVER","ConfigOptionsResolver","stringResolver","set","config","options","value","valueOf","parent","node","key","resolve","get","call"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AAIA;;;;;;AAEA;;;;;;;AAOA;;;;AAIA;;;;AAIA,IAAMA,kBAAkB,uBAAxB;;AAEA;;;;IAGMC,qB;AACF;;;;AAIA,iCAAYC,cAAZ,EAA4B;AAAA;;AACxBF,oBAAgBG,GAAhB,CAAoB,IAApB,EAA0BD,cAA1B;AACH;;AAED;;;;;;;;;;AAkBA;;;;;4BAKQE,M,EAAQC,O,EAAS;AACrB,UAAMC,QAAQL,sBAAsBM,OAAtB,CAA8BH,MAA9B,EAAsCC,OAAtC,CAAd;;AADqB;AAAA;AAAA;;AAAA;AAGrB,wDAAkC,gCAAsBC,KAAtB,EAA6B,CAA7B,EAAgC,IAAhC,CAAlC,4GAAyE;AAAA;AAAA,cAA7DE,MAA6D,eAA7DA,MAA6D;AAAA,cAArDC,IAAqD,eAArDA,IAAqD;AAAA,cAA/CC,GAA+C,eAA/CA,GAA+C;;AACrE,cAAI,sBAASD,IAAT,CAAJ,EAAoB;AAChBD,mBAAOE,GAAP,IAAc,KAAKR,cAAL,CAAoBS,OAApB,CAA4BF,IAA5B,CAAd;AACH;AACJ;AAPoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AASrB,aAAOH,KAAP;AACH;;;wBA7BoB;AACjB,aAAON,gBAAgBY,GAAhB,CAAoB,IAApB,CAAP;AACH;;AAED;;;;;;;;;4BAMeR,M,EAAQC,O,EAAS;AAC5B,aAAO,wBAAWA,OAAX,IAAsBA,QAAQQ,IAAR,CAAaT,MAAb,EAAqBA,MAArB,CAAtB,GAAqDC,OAA5D;AACH;;;;;kBAoBUJ,qB","file":"ConfigOptionsResolver.js","sourcesContent":["import {\n    isFunction,\n    isString\n} from 'lodash';\nimport RecursiveIterator from 'recursive-iterator';\n\n/**\n * @function\n * @name ConfigTransform\n * @param {Config} config\n * @returns {Config|Object}\n */\n\n/**\n * @typedef {Object|ConfigTransform} ConfigOptions\n */\n\n/**\n * @private\n * @type {WeakMap}\n */\nconst STRING_RESOLVER = new WeakMap();\n\n/**\n * @class\n */\nclass ConfigOptionsResolver {\n    /**\n     * @constructor\n     * @param {ConfigStringResolver} stringResolver\n     */\n    constructor(stringResolver) {\n        STRING_RESOLVER.set(this, stringResolver);\n    }\n\n    /**\n     * @readonly\n     * @type {ConfigStringResolver}\n     */\n    get stringResolver() {\n        return STRING_RESOLVER.get(this);\n    }\n\n    /**\n     * @private\n     * @param {Config} config\n     * @param {ConfigOptions} options\n     * @returns {Object}\n     */\n    static valueOf(config, options) {\n        return isFunction(options) ? options.call(config, config) : options;\n    }\n\n    /**\n     * @param {Config} config\n     * @param {ConfigOptions} options\n     * @returns {Object}\n     */\n    resolve(config, options) {\n        const value = ConfigOptionsResolver.valueOf(config, options);\n\n        for (const {parent, node, key} of new RecursiveIterator(value, 1, true)) {\n            if (isString(node)) {\n                parent[key] = this.stringResolver.resolve(node);\n            }\n        }\n\n        return value;\n    }\n}\n\nexport default ConfigOptionsResolver;\n"]}